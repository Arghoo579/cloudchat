<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet"
	  href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <script src='/_ah/channel/jsapi'></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular-resource.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.15/angular-sanitize.js"></script>
    <script src="/js/controller.js"></script>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <title>Cloudchat</title>
  </head>
  
  <body ng-app="app">
    <div class="container-fluid">
      <ul class="nav nav-tabs" role="tablist">
	<li><a href="/">Home</a></li>
	<li class="active"><a href="/new">Your chats</a></li>
	<li><a href="/faq">FAQ</a></li>
      </ul>
      <div class="row">
	<div class="container"  ng-controller="UserPage">
	  <h1 class="text-center">Cloudchat</h1>
	  <div class="col-md-8 col-md-offset-2">
	    <div id="form" class="well">
	      <form ng-submit="createChat()" class="form-horizontal"
		    role="form">
		<div class="form-group">
		  <label for="name" class="col-sm-3">Chat name</label>
		  <div class="col-sm-8">
		    <input type="text" class="form-control" id="name"  ng-model="name" required>
		  </div>
		</div>
		<div class="form-group">
		  <div class="col-md-offset-3">
		    <div class="checkbox">
		      <label>
			<input type="checkbox" ng-model="privte">
			Private Chat (Not publicly listed).
		      </label>
		    </div>
		    <div class="checkbox">
		      <label>
			<input type="checkbox" ng-model="persistent">
			Persistent (keep online after no connection is left).
		      </label>
		    </div>
		    <div class="checkbox">
		      <label>
			<input type="checkbox" ng-model="save">
			Save the messages.
		      </label>
		    </div>
		    <div class="checkbox">
		      <label>
			<input type="checkbox" ng-model="conversations">
			Allow sending private room invitations.
		      </label>
		    </div>
		  </div>
		</div>
		<div class="form-group">
		  <div class="col-md-offset-3">
		    <input type="submit" id="submit" value="Create Chat" />
		  </div>
		</div>
	      </form>
	    </div>
	  </div>
	  <div class="col-md-12">
	    <h2>Your chats</h2>
	    <table class="table well">
	      <tr><th>Name</th>
		<th>Time created</th>
		<th>Private</th>
		<th>Persistent</th>
		<th>Allow conversations</th>
		<th>Connected</th>
		<th>Download messages.</th>
	      </tr>
	      <tr ng-repeat="chat in chats">
		<td>
		  <a href="/chat?key={{ chat.key }}">
		    {{ chat.name }}
		  </a>
		</td>
		<td>{{ chat.date }}</td>
		<td>{{ chat.private }}</td>
		<td>{{ chat.persistent }}</td>
		<td>{{ chat.conversations }}</td>
		<td>{{ chat.num_clients }}</td>
		<td ng-if="chat.save == true">
		  <a href="/API/download?key={{ chat.key }}"
		     download="messages.json">
		    <i class="fa fa-download"></i>
		  </a>
		</td>
		<td ng-if="chat.save == false">
		  <i class="fa fa-ban"></i>
		</td>
	      </tr>
	    </table>

	  </div>
	</div>
      </div>
    </div>
  </body>
</html>
